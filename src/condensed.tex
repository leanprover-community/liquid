\section{Condensed abelian groups}

\begin{remark}
  For the time being, the following facts will be used without proof in this text.
  (They have or will be formalized in Lean though.)

  \begin{itemize}
    \item There is a natural functor $\Top \to \Cond(\Sets)$.
    \item The category of condensed abelian groups (resp.~condensed $R$-modules)
      is an abelian category with enough projectives.
      For $S$ an extremally disconnected set, the objects $\mathbb Z[S]$ (resp.~$R[S]$) is projective.
    \item We write $H^i(S, M)$ for $\text{Ext}^i(\mathbb Z[S], M)$.
  \end{itemize}
\end{remark}

\begin{definition}
  \label{CHPNG-to-Cond}
  \uses{png-cats}
  \lean{CompHausFiltPseuNormGrpâ‚.presheaf}
  There is a natural functor
  \begin{align*}
    \text{CHPNG} &\to \Cond(\Ab) \\
    M &\mapsto \underline{M}
  \end{align*}
  where $\underline{M}(S)$ is defined to be collection of functions $f \colon S \to M$ that factor as continuous through $M_c$, for some $c$.
  In symbols:
  \[ M(S) = \{f \colon S \to M \mid \exists c, f(S) \subset M_c \text{ and $f \colon S \to M_c$ is continuous}\}. \]
\end{definition}

\begin{proposition}
  \label{CHPNG-Cond-exact}
  \uses{CHPNG-to-Cond}
  Consider a short exact sequence of abelian groups
  \[ 0\to X'\xrightarrow{f} X\xrightarrow{g} X''\to 0 \]
  such that all of $X'$, $X$ and $X''$ carry the structure of compact-Hausdorffly-filtered-pseudonormed abelian groups.
  Assume that $f(X'_{\leq c})\subset X_{\leq c}$ and $g(X_{\leq c})\subset X''_{\leq c}$.
  Moreover, assume that there are some $c_f$ and $c_g$
  so that $\mathrm{ker}(g)\cap X_{\leq c}\subset f(X'_{\leq c_fc})$ and $X''_{\leq c}\subset g(X_{\leq c_gc})$.
  Then the sequence
  \[ 0\to \underline{X'}\to \underline{X}\to \underline{X''}\to 0 \]
  of condensed abelian groups is exact.
\end{proposition}

\begin{proof}
  We evaluate at $S\in \mathrm{ExtrDisc}$.
  Any map $S\to X''$ factors over some $X''_{\leq c}$,
  and then $g: X_{\leq c_gc}\times_{X''} X''_{\leq c}\to X''_{\leq c}$ is a surjection of compact Hausdorff spaces;
  as $S$ is extremally disconnected, the map $S\to X''_{\leq c}$ can be lifted,
  showing that $g: X(S)\to X''(S)$ is surjective.
  A similar argument shows that the kernel of $g: X(S)\to X''(S)$ is in the image of $f: X'(S)\to X(S)$,
  the latter clearly being injective.
\end{proof}

\begin{proposition}
  \label{CHPNG-Cond-exact-lim}
  \uses{CHPNG-to-Cond, bounded-limits}
  Consider an inverse system
  \[ (0\to X'_i\xrightarrow{f_i} X_i\xrightarrow{g_i} X_i''\to 0)_i \]
  of short exact sequences as in Proposition~\ref{prop:comphausfilttocond},
  satisfying the hypothesis for fixed constants $c_f$ and $c_g$.
  Moreover, assume that the transition maps $X'_i\to X'_j$, $X_i\to X_j$ and $X''_i\to X''_j$ are strict, and let $X'$, $X$ and $X''$ be their limits.
  Then
  \[ 0\to X'\xrightarrow{f} X\xrightarrow{g} X''\to 0 \]
  satisfies the hypotheses of Proposition~\ref{CHPNG-to-Cond-exact} with the same $c_f$ and $c_g$.
\end{proposition}

\begin{proof}
  Pass to cofiltered limits of compact Hausdorff spaces in statements such as $X''_{i,\leq c}\subset g(X_{i,\leq c_g c})$,
  noting that cofiltered limits of surjections of compact Hausdorff spaces are still surjective (by an application of Tychonoff).
\end{proof}

\begin{lemma}
  \label{free-png}
  \uses{CHPNG-to-Cond}
  Let $S = \varprojlim S_i$ be a profinite set.
  Then $\mathbb Z[S]$ is naturally a profinitely filtered pseudo-normed group,
  via $\mathbb Z[S]_{\le c} = \varprojlim \mathbb Z[S_i]_{\le c}$,
  where $\mathbb Z[S_i]_{\le c}$ is the set $\{\sum_{s \in S_i} n_s[s] \mid \sum_s |n_s| \le c\}$.

  There is a natural isomorphism between the free condensed abelian group $\mathbb Z[S]$
  and the colimit $\bigcup_c \mathbb Z[S]_{\le c}$ of condensed sets.
\end{lemma}

\begin{proof}
  For now, see Lemma~2.1 of \cite{Analytic}.
\end{proof}

\begin{proposition}
  \label{acyclic-sheaf}
  Let
  \[ M \colon \mathrm{ProFin}^{\mathrm{op}}\to \mathrm{Ab} \]
  be a functor, i.e.~a presheaf of abelian groups on $\mathrm{ProFin}$. Assume that $M$ preserves finite products, and that for any surjective map $f: T\to S$, the complex
  \[ 0\to M(S)\to M(T)\to M(T\times_S T)\to M(T\times_S T\times_S T)\to \ldots \]
  is exact.

  Then $M$ is a condensed abelian group, and for all profinite sets $S$ and $i>0$, one has $H^i(S,M)=0$ for $i>0$.
\end{proposition}

\begin{proof}
  % Proposition~\ref{prop:CondAbexplicitsheafcond} shows that $M$ is a condensed abelian group.
  We prove by induction on $i>0$ that $H^i(S,M)=0$ for all profinite sets $S$, so assume the vanishing of $\mathrm{Ext}^1,\ldots,\mathrm{Ext}^i$ for some $i\geq 0$.
  (This is vacuous for $i=0$.)
  We aim to prove that $H^{i+1}(S,M)=0$ for all profinite sets $S$.
  Pick any profinite set $S$ and a cover $T\to S$ with $T\in \mathrm{ExtrDisc}$.
  We get a long exact sequence of condensed abelian groups
  \[ \ldots\to \mathbb Z[T\times_S T\times_S T]\to \mathbb Z[T\times_S T]\to \mathbb Z[T]\to \mathbb Z[S]\to 0: \]
  Indeed, taken as presheaves on $\mathrm{ExtrDisc}$, this is already true on the level of presheaves,
  where it reduces to the case of surjections of sets in which case one can write down a contracting homotopy.
  (Actually, the similar result is true in any topos, where one has to maybe argue a bit more carefully.)
  
  The following argument is making explicit something usually seen through a spectral sequence. Define inductively
  \[ K_1=\mathrm{ker}(\mathbb Z[T]\to \mathbb Z[S]), \]
  \[ K_2=\mathrm{ker}(\mathbb Z[T\times_S T]\to \mathbb Z[T]) \]
  etc. One gets exact sequences
  \[ 0\to K_n\to \mathbb Z[T^{n/S}]\to K_{n-1}\to 0 \]
  for $n\geq 2$. From the long exact sequence
  \[ \ldots\to H^i(T,M)\to \mathrm{Ext}^i(K_1,M)\to H^{i+1}(S,M)\to H^{i+1}(T,M)=0 \]
  we see that we have to prove that $\mathrm{Ext}^i(K_1,M)=0$ (if $i>0$, otherwise that $M(T)$ surjects onto $\mathrm{Hom}(K_1,M)$).
  Assuming $i>0$, we can go on, and using the inductive hypothesis applied to the fibre products $T^{\ast/S}$, we inductively see that
  \[ H^{i+1}(S,M)=\mathrm{Ext}^i(K_1,M)=\mathrm{Ext}^{i-1}(K_2,M)=\ldots=\mathrm{Ext}^1(K_i,M) \]
  and eventually that this is the same as the cokernel of
  \[ M(T^{i/S})\to \mathrm{Hom}(K_{i+1},M).  \]
  But there is an exact sequence
  \[ 0\to \mathrm{Hom}(K_{i+1},M)\to M(T^{(i+1)/S})\to \mathrm{Hom}(K_{i+2},M) \]
  and $\mathrm{Hom}(K_{i+2},M)$ injects into $M(T^{(i+2)/S})$. We see that
  \[ \mathrm{Hom}(K_{i+1},M)=\mathrm{ker}(M(T^{(i+1)/S})\to M(T^{(i+2)/S})) \]
  and we need to see that
  \[ M(T^{i/S})\to \mathrm{Hom}(K_{i+1},M)=\mathrm{ker}(M(T^{(i+1)/S})\to M(T^{(i+2)/S})) \]
  is surjective, which is precisely the exactness of the \v{C}ech complex.
\end{proof}

\begin{lemma}
  \label{Ext-Lbar}
  \uses{Mbar, normed_with_aut}
  Let $0 < r < r' < 1$ be real numbers.
  Let $S$ be a profinite set, and let $V$ be an $r$-normed $\mathbb Z[T^{\pm1}]$-module.
  Then $\Ext_{\CondMod_{\mathbb Z[T^{-1}]}}^i(\overline{\mathcal M_{r'}}(S), V) = 0$ for all $i \ge 0$.
\end{lemma}

\begin{proof}
  \uses{first_target}
  TODO
\end{proof}

\begin{lemma}
  \label{Lbar-ses}
  Let $0 < r' < 1$ be a real number, and let $S$ be a profinite set.
  There is a natural short exact sequence of condensed $\mathbb Z[T^{-1}]$-modules
  \[ 0 \to \mathbb Z[T^{-1}][S] \to \mathcal L_{r'}(S) \to \overline{\mathcal{M}_{r'}}(S) \to 0.  \]
\end{lemma}

\begin{proof}
  TODO
\end{proof}

\begin{lemma}
  \label{Ext-L}
  \uses{laureant-measures, normed_with_aut}
  Let $0 < r < r' < 1$ be real numbers.
  Let $S$ be a profinite set, and let $V$ be an $r$-normed $\mathbb Z[T^{\pm1}]$-module.
  Then $\Ext_{\CondMod_{\mathbb Z[T^{-1}]}}^i(\mathcal L_{r'}(S), V) = 0$ for all $i > 0$.
\end{lemma}

\begin{proof}
  \uses{acyclic-sheaf, Ext-Lbar}
  Consider the long exact sequence of Ext-groups
  arising form the short exact sequence (Lemma~\ref{Lbar-ses})
  \[
    0 \to \mathbb Z[T^{-1}][S] \to \mathcal L_{r'}(S) \to \overline{\mathcal{M}_{r'}}(S) \to 0
  \]
  by applying $\Ext^*(\_, V)$.

  By Lemma~\ref{acyclic-sheaf} all groups $\Ext_{\Cond(\Ab)}^i(\Z[S], V)$ vanish for $i > 0$.
  And by Lemma~\ref{Ext-Lbar} all groups $\Ext_{\CondMod_{\mathbb Z[T^{-1}]}}^i(\overline{\mathcal M_{r'}}(S), V)$ vanish for $i \ge 0$.
  The result follows.
\end{proof}

\begin{lemma}
  \label{M-ses}
  \uses{laurent-measures, real-measures}
  Let $0 < p' < 1$ be a real number,
  let $S$ be a profinite set,
  and let $r'$ denote $(\tfrac12)^{p'}$.
  There is a short exact sequence of condensed $\mathbb Z[T^{-1}]$-modules
  \[
    0 \to \mathcal L_{r'}(S) \to \mathcal L_{r'}(S) \to \mathcal M_{p'}(S) \to 0
  \]
  where the first map is multiplication by $2T - 1$, and the second is evaluation at $T = \tfrac12$.
\end{lemma}

\begin{proof}
  \uses{theta.surjective}
  TODO
\end{proof}

\begin{theorem}[Clausen--Scholze]
  \label{main-thm}
  \uses{p-banach, real-measures}
  Let $0 < p' < p \le 1$ be real numbers,
  let $S$ be a profinite set,
  and let $V$ be a $p$-Banach space.
  Let $\mathcal M_{p'}(S)$ be the space of $p'$-measures on $S$. Then
  \[ \Ext^i_{\Cond(\Ab)}(\mathcal M_{p'}(S),V) = 0 \]
  for $i \ge 1$.
\end{theorem}

\begin{proof}
  \uses{M-ses, Ext-L}
  By Lemma~\ref{Ext-L}, it suffices to prove
  \[ \Ext^i_{\Cond(\Ab)}(\mathcal M_{p'}(S),V) \cong \Ext_{\CondMod_{\mathbb Z[T^{-1}]}}^i(\mathcal L_{r'}(S), V). \]
  TODO
\end{proof}

% vim: ts=2 et sw=2 sts=2
